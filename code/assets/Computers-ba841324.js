import{_ as fn,a as Se,n as hn,i as Mt,b as St,t as pn,f as mn,c as Lt,d as Pt,s as gn,e as yn,h as Ne,S as An,R as me,k as Tn,l as bn,r as x,m as xn,j as D,P as Fe,u as Kt,o as zt}from"./index-f55a1f61.js";import{f as k,ac as X,ad as Le,p as Wt,E as we,z as oe,af as En,ag as We,ah as Rn,ai as Re,aj as ve,Q as Qe,ak as _t,V as W,r as mt,e as te,al as tt,u as Vt,am as Qt,an as Ve,O as gt,ao as Xt,A as Yt,ap as vn,C as ie,aq as wn,g as qt,aa as Zt,ab as Mn,ae as $t,a6 as yt,T as Sn,a as ct,b as Jt,L as en,c as lt,F as Xe,S as Ln,P as Pn,D as _n,M as De,ar as ge,d as ye,I as On,h as In,B as ke,i as Cn,j as tn,k as nn,R as ut,l as Nn,m as nt,n as Dn,o as sn,q as kn,t as Fn,v as jn,w as Un,x as Hn,y as Gn,G as st,H as Bn,J as rn,K as Kn,N as zn,U as Wn,W as Vn,X as Qn,Y as Xn,Z as Yn,_ as qn,$ as Zn,a0 as $n,a1 as Jn,a2 as Ot,a3 as es,a4 as It,a5 as ts,a7 as ns,a8 as ss,as as rs}from"./Preload-3f1aa327.js";var os=function(l){fn(t,l);function t(e,s){var r;return r=l.call(this)||this,r.client=e,r.options=s,r.trackedProps=[],r.selectError=null,r.bindMethods(),r.setOptions(s),r}var n=t.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),Ct(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return dt(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return dt(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(s,r){var o=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(s),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery();var a=this.hasListeners();a&&Nt(this.currentQuery,i,this.options,o)&&this.executeFetch(),this.updateResult(r),a&&(this.currentQuery!==i||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout();var c=this.computeRefetchInterval();a&&(this.currentQuery!==i||this.options.enabled!==o.enabled||c!==this.currentRefetchInterval)&&this.updateRefetchInterval(c)},n.getOptimisticResult=function(s){var r=this.client.defaultQueryObserverOptions(s),o=this.client.getQueryCache().build(this.client,r);return this.createResult(o,r)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(s,r){var o=this,i={},a=function(u){o.trackedProps.includes(u)||o.trackedProps.push(u)};return Object.keys(s).forEach(function(c){Object.defineProperty(i,c,{configurable:!1,enumerable:!0,get:function(){return a(c),s[c]}})}),(r.useErrorBoundary||r.suspense)&&a("error"),i},n.getNextResult=function(s){var r=this;return new Promise(function(o,i){var a=r.subscribe(function(c){c.isFetching||(a(),c.isError&&(s!=null&&s.throwOnError)?i(c.error):o(c))})})},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(s){return this.fetch(Se({},s,{meta:{refetchPage:s==null?void 0:s.refetchPage}}))},n.fetchOptimistic=function(s){var r=this,o=this.client.defaultQueryObserverOptions(s),i=this.client.getQueryCache().build(this.client,o);return i.fetch().then(function(){return r.createResult(i,o)})},n.fetch=function(s){var r=this;return this.executeFetch(s).then(function(){return r.updateResult(),r.currentResult})},n.executeFetch=function(s){this.updateQuery();var r=this.currentQuery.fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(hn)),r},n.updateStaleTimeout=function(){var s=this;if(this.clearStaleTimeout(),!(Mt||this.currentResult.isStale||!St(this.options.staleTime))){var r=pn(this.currentResult.dataUpdatedAt,this.options.staleTime),o=r+1;this.staleTimeoutId=setTimeout(function(){s.currentResult.isStale||s.updateResult()},o)}},n.computeRefetchInterval=function(){var s;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(s=this.options.refetchInterval)!=null?s:!1},n.updateRefetchInterval=function(s){var r=this;this.clearRefetchInterval(),this.currentRefetchInterval=s,!(Mt||this.options.enabled===!1||!St(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(r.options.refetchIntervalInBackground||mn.isFocused())&&r.executeFetch()},this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(s,r){var o=this.currentQuery,i=this.options,a=this.currentResult,c=this.currentResultState,u=this.currentResultOptions,d=s!==o,h=d?s.state:this.currentQueryInitialState,p=d?this.currentResult:this.previousQueryResult,y=s.state,m=y.dataUpdatedAt,g=y.error,A=y.errorUpdatedAt,v=y.isFetching,T=y.status,R=!1,M=!1,w;if(r.optimisticResults){var O=this.hasListeners(),E=!O&&Ct(s,r),S=O&&Nt(s,o,r,i);(E||S)&&(v=!0,m||(T="loading"))}if(r.keepPreviousData&&!y.dataUpdateCount&&(p!=null&&p.isSuccess)&&T!=="error")w=p.data,m=p.dataUpdatedAt,T=p.status,R=!0;else if(r.select&&typeof y.data<"u")if(a&&y.data===(c==null?void 0:c.data)&&r.select===this.selectFn)w=this.selectResult;else try{this.selectFn=r.select,w=r.select(y.data),r.structuralSharing!==!1&&(w=Lt(a==null?void 0:a.data,w)),this.selectResult=w,this.selectError=null}catch(U){Pt().error(U),this.selectError=U}else w=y.data;if(typeof r.placeholderData<"u"&&typeof w>"u"&&(T==="loading"||T==="idle")){var N;if(a!=null&&a.isPlaceholderData&&r.placeholderData===(u==null?void 0:u.placeholderData))N=a.data;else if(N=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof N<"u")try{N=r.select(N),r.structuralSharing!==!1&&(N=Lt(a==null?void 0:a.data,N)),this.selectError=null}catch(U){Pt().error(U),this.selectError=U}typeof N<"u"&&(T="success",w=N,M=!0)}this.selectError&&(g=this.selectError,w=this.selectResult,A=Date.now(),T="error");var I={status:T,isLoading:T==="loading",isSuccess:T==="success",isError:T==="error",isIdle:T==="idle",data:w,dataUpdatedAt:m,error:g,errorUpdatedAt:A,failureCount:y.fetchFailureCount,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>h.dataUpdateCount||y.errorUpdateCount>h.errorUpdateCount,isFetching:v,isRefetching:v&&T!=="loading",isLoadingError:T==="error"&&y.dataUpdatedAt===0,isPlaceholderData:M,isPreviousData:R,isRefetchError:T==="error"&&y.dataUpdatedAt!==0,isStale:At(s,r),refetch:this.refetch,remove:this.remove};return I},n.shouldNotifyListeners=function(s,r){if(!r)return!0;var o=this.options,i=o.notifyOnChangeProps,a=o.notifyOnChangePropsExclusions;if(!i&&!a||i==="tracked"&&!this.trackedProps.length)return!0;var c=i==="tracked"?this.trackedProps:i;return Object.keys(s).some(function(u){var d=u,h=s[d]!==r[d],p=c==null?void 0:c.some(function(m){return m===u}),y=a==null?void 0:a.some(function(m){return m===u});return h&&!y&&(!c||p)})},n.updateResult=function(s){var r=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!gn(this.currentResult,r)){var o={cache:!0};(s==null?void 0:s.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,r)&&(o.listeners=!0),this.notify(Se({},o,s))}},n.updateQuery=function(){var s=this.client.getQueryCache().build(this.client,this.options);if(s!==this.currentQuery){var r=this.currentQuery;this.currentQuery=s,this.currentQueryInitialState=s.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))}},n.onQueryUpdate=function(s){var r={};s.type==="success"?r.onSuccess=!0:s.type==="error"&&!yn(s.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()},n.notify=function(s){var r=this;Ne.batch(function(){s.onSuccess?(r.options.onSuccess==null||r.options.onSuccess(r.currentResult.data),r.options.onSettled==null||r.options.onSettled(r.currentResult.data,null)):s.onError&&(r.options.onError==null||r.options.onError(r.currentResult.error),r.options.onSettled==null||r.options.onSettled(void 0,r.currentResult.error)),s.listeners&&r.listeners.forEach(function(o){o(r.currentResult)}),s.cache&&r.client.getQueryCache().notify({query:r.currentQuery,type:"observerResultsUpdated"})})},t}(An);function is(l,t){return t.enabled!==!1&&!l.state.dataUpdatedAt&&!(l.state.status==="error"&&t.retryOnMount===!1)}function Ct(l,t){return is(l,t)||l.state.dataUpdatedAt>0&&dt(l,t,t.refetchOnMount)}function dt(l,t,n){if(t.enabled!==!1){var e=typeof n=="function"?n(l):n;return e==="always"||e!==!1&&At(l,t)}return!1}function Nt(l,t,n,e){return n.enabled!==!1&&(l!==t||e.enabled===!1)&&(!n.suspense||l.state.status!=="error")&&At(l,n)}function At(l,t){return l.isStaleByTime(t.staleTime)}function as(){var l=!1;return{clearReset:function(){l=!1},reset:function(){l=!0},isReset:function(){return l}}}var cs=me.createContext(as()),ls=function(){return me.useContext(cs)};function us(l,t,n){return typeof t=="function"?t.apply(void 0,n):typeof t=="boolean"?t:!!l}function ds(l,t){var n=me.useRef(!1),e=me.useState(0),s=e[1],r=Tn(),o=ls(),i=r.defaultQueryObserverOptions(l);i.optimisticResults=!0,i.onError&&(i.onError=Ne.batchCalls(i.onError)),i.onSuccess&&(i.onSuccess=Ne.batchCalls(i.onSuccess)),i.onSettled&&(i.onSettled=Ne.batchCalls(i.onSettled)),i.suspense&&(typeof i.staleTime!="number"&&(i.staleTime=1e3),i.cacheTime===0&&(i.cacheTime=1)),(i.suspense||i.useErrorBoundary)&&(o.isReset()||(i.retryOnMount=!1));var a=me.useState(function(){return new t(r,i)}),c=a[0],u=c.getOptimisticResult(i);if(me.useEffect(function(){n.current=!0,o.clearReset();var d=c.subscribe(Ne.batchCalls(function(){n.current&&s(function(h){return h+1})}));return c.updateResult(),function(){n.current=!1,d()}},[o,c]),me.useEffect(function(){c.setOptions(i,{listeners:!1})},[i,c]),i.suspense&&u.isLoading)throw c.fetchOptimistic(i).then(function(d){var h=d.data;i.onSuccess==null||i.onSuccess(h),i.onSettled==null||i.onSettled(h,null)}).catch(function(d){o.clearReset(),i.onError==null||i.onError(d),i.onSettled==null||i.onSettled(void 0,d)});if(u.isError&&!o.isReset()&&!u.isFetching&&us(i.suspense,i.useErrorBoundary,[u.error,c.getCurrentQuery()]))throw u.error;return i.notifyOnChangeProps==="tracked"&&(u=c.trackResult(u,i)),u}function on(l,t,n){var e=bn(l,t,n);return ds(e,os)}const Ue=new k,Tt=new k,fs=new k;function hs(l,t,n){const e=Ue.setFromMatrixPosition(l.matrixWorld);e.project(t);const s=n.width/2,r=n.height/2;return[e.x*s+s,-(e.y*r)+r]}function ps(l,t){const n=Ue.setFromMatrixPosition(l.matrixWorld),e=Tt.setFromMatrixPosition(t.matrixWorld),s=n.sub(e),r=t.getWorldDirection(fs);return s.angleTo(r)>Math.PI/2}function ms(l,t,n,e){const s=Ue.setFromMatrixPosition(l.matrixWorld),r=s.clone();r.project(t),n.setFromCamera(r,t);const o=n.intersectObjects(e,!0);if(o.length){const i=o[0].distance;return s.distanceTo(n.ray.origin)<i}return!0}function gs(l,t){if(t instanceof we)return t.zoom;if(t instanceof oe){const n=Ue.setFromMatrixPosition(l.matrixWorld),e=Tt.setFromMatrixPosition(t.matrixWorld),s=t.fov*Math.PI/180,r=n.distanceTo(e);return 1/(2*Math.tan(s/2)*r)}else return 1}function ys(l,t,n){if(t instanceof oe||t instanceof we){const e=Ue.setFromMatrixPosition(l.matrixWorld),s=Tt.setFromMatrixPosition(t.matrixWorld),r=e.distanceTo(s),o=(n[1]-n[0])/(t.far-t.near),i=n[1]-o*t.far;return Math.round(o*r+i)}}const ft=l=>Math.abs(l)<1e-10?0:l;function an(l,t,n=""){let e="matrix3d(";for(let s=0;s!==16;s++)e+=ft(t[s]*l.elements[s])+(s!==15?",":")");return n+e}const As=(l=>t=>an(t,l))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Ts=(l=>(t,n)=>an(t,l(n),"translate(-50%,-50%)"))(l=>[1/l,1/l,1/l,1,-1/l,-1/l,-1/l,-1,1/l,1/l,1/l,1,1,1,1,1]);function bs(l){return l&&typeof l=="object"&&"current"in l}const xs=x.forwardRef(({children:l,eps:t=.001,style:n,className:e,prepend:s,center:r,fullscreen:o,portal:i,distanceFactor:a,sprite:c=!1,transform:u=!1,occlude:d,onOcclude:h,castShadow:p,receiveShadow:y,material:m,geometry:g,zIndexRange:A=[16777271,0],calculatePosition:v=hs,as:T="div",wrapperClass:R,pointerEvents:M="auto",...w},O)=>{const{gl:E,camera:S,scene:N,size:I,raycaster:U,events:G,viewport:Y}=X(),[j]=x.useState(()=>document.createElement(T)),z=x.useRef(),H=x.useRef(null),de=x.useRef(0),fe=x.useRef([0,0]),he=x.useRef(null),Ae=x.useRef(null),ae=(i==null?void 0:i.current)||G.connected||E.domElement.parentNode,q=x.useRef(null),Te=x.useRef(!1),be=x.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&bs(d[0]),[d]);x.useLayoutEffect(()=>{const K=E.domElement;d&&d==="blending"?(K.style.zIndex=`${Math.floor(A[0]/2)}`,K.style.position="absolute",K.style.pointerEvents="none"):(K.style.zIndex=null,K.style.position=null,K.style.pointerEvents=null)},[d]),x.useLayoutEffect(()=>{if(H.current){const K=z.current=xn(j);if(N.updateMatrixWorld(),u)j.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const F=v(H.current,S,I);j.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${F[0]}px,${F[1]}px,0);transform-origin:0 0;`}return ae&&(s?ae.prepend(j):ae.appendChild(j)),()=>{ae&&ae.removeChild(j),K.unmount()}}},[ae,u]),x.useLayoutEffect(()=>{R&&(j.className=R)},[R]);const He=x.useMemo(()=>u?{position:"absolute",top:0,left:0,width:I.width,height:I.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:r?"translate3d(-50%,-50%,0)":"none",...o&&{top:-I.height/2,left:-I.width/2,width:I.width,height:I.height},...n},[n,r,o,I,u]),Ge=x.useMemo(()=>({position:"absolute",pointerEvents:M}),[M]);x.useLayoutEffect(()=>{if(Te.current=!1,u){var K;(K=z.current)==null||K.render(x.createElement("div",{ref:he,style:He},x.createElement("div",{ref:Ae,style:Ge},x.createElement("div",{ref:O,className:e,style:n,children:l}))))}else{var F;(F=z.current)==null||F.render(x.createElement("div",{ref:O,style:He,className:e,children:l}))}});const ne=x.useRef(!0);Le(K=>{if(H.current){S.updateMatrixWorld(),H.current.updateWorldMatrix(!0,!1);const F=u?fe.current:v(H.current,S,I);if(u||Math.abs(de.current-S.zoom)>t||Math.abs(fe.current[0]-F[0])>t||Math.abs(fe.current[1]-F[1])>t){const Z=ps(H.current,S);let V=!1;be&&(d!=="blending"?V=[N]:Array.isArray(d)&&(V=d.map($=>$.current)));const ce=ne.current;if(V){const $=ms(H.current,S,U,V);ne.current=$&&!Z}else ne.current=!Z;ce!==ne.current&&(h?h(!ne.current):j.style.display=ne.current?"block":"none");const xe=Math.floor(A[0]/2),Ye=d?be?[A[0],xe]:[xe-1,0]:A;if(j.style.zIndex=`${ys(H.current,S,Ye)}`,u){const[$,Ee]=[I.width/2,I.height/2],pe=S.projectionMatrix.elements[5]*Ee,{isOrthographicCamera:_e,top:qe,left:Ze,bottom:Be,right:Ke}=S,$e=As(S.matrixWorldInverse),Je=_e?`scale(${pe})translate(${ft(-(Ke+Ze)/2)}px,${ft((qe+Be)/2)}px)`:`translateZ(${pe}px)`;let J=H.current.matrixWorld;c&&(J=S.matrixWorldInverse.clone().transpose().copyPosition(J).scale(H.current.scale),J.elements[3]=J.elements[7]=J.elements[11]=0,J.elements[15]=1),j.style.width=I.width+"px",j.style.height=I.height+"px",j.style.perspective=_e?"":`${pe}px`,he.current&&Ae.current&&(he.current.style.transform=`${Je}${$e}translate(${$}px,${Ee}px)`,Ae.current.style.transform=Ts(J,1/((a||10)/400)))}else{const $=a===void 0?1:gs(H.current,S)*a;j.style.transform=`translate3d(${F[0]}px,${F[1]}px,0) scale(${$})`}fe.current=F,de.current=S.zoom}}if(!be&&q.current&&!Te.current)if(u){if(he.current){const F=he.current.children[0];if(F!=null&&F.clientWidth&&F!=null&&F.clientHeight){const{isOrthographicCamera:Z}=S;if(Z||g)w.scale&&(Array.isArray(w.scale)?w.scale instanceof k?q.current.scale.copy(w.scale.clone().divideScalar(1)):q.current.scale.set(1/w.scale[0],1/w.scale[1],1/w.scale[2]):q.current.scale.setScalar(1/w.scale));else{const V=(a||10)/400,ce=F.clientWidth*V,xe=F.clientHeight*V;q.current.scale.set(ce,xe,1)}Te.current=!0}}}else{const F=j.children[0];if(F!=null&&F.clientWidth&&F!=null&&F.clientHeight){const Z=1/Y.factor,V=F.clientWidth*Z,ce=F.clientHeight*Z;q.current.scale.set(V,ce,1),Te.current=!0}q.current.lookAt(K.camera.position)}});const Pe=x.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return x.createElement("group",Se({},w,{ref:H}),d&&!be&&x.createElement("mesh",{castShadow:p,receiveShadow:y,ref:q},g||x.createElement("planeGeometry",null),m||x.createElement("shaderMaterial",{side:Wt,vertexShader:Pe.vertexShader,fragmentShader:Pe.fragmentShader})))});let Oe=0;const Es=En(l=>(We.onStart=(t,n,e)=>{l({active:!0,item:t,loaded:n,total:e,progress:(n-Oe)/(e-Oe)*100})},We.onLoad=()=>{l({active:!1})},We.onError=t=>l(n=>({errors:[...n.errors,t]})),We.onProgress=(t,n,e)=>{n===e&&(Oe=e),l({active:!0,item:t,loaded:n,total:e,progress:(n-Oe)/(e-Oe)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function je(l){return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(l)}function Rs(l,t){if(je(l)!=="object"||l===null)return l;var n=l[Symbol.toPrimitive];if(n!==void 0){var e=n.call(l,t||"default");if(je(e)!=="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(l)}function vs(l){var t=Rs(l,"string");return je(t)==="symbol"?t:String(t)}function P(l,t,n){return t=vs(t),t in l?Object.defineProperty(l,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[t]=n,l}const Dt=(l,t)=>(l%t+t)%t;let ws=class extends Rn{constructor(t,n){super(),P(this,"object",void 0),P(this,"domElement",void 0),P(this,"enabled",!0),P(this,"target",new k),P(this,"minDistance",0),P(this,"maxDistance",1/0),P(this,"minZoom",0),P(this,"maxZoom",1/0),P(this,"minPolarAngle",0),P(this,"maxPolarAngle",Math.PI),P(this,"minAzimuthAngle",-1/0),P(this,"maxAzimuthAngle",1/0),P(this,"enableDamping",!1),P(this,"dampingFactor",.05),P(this,"enableZoom",!0),P(this,"zoomSpeed",1),P(this,"enableRotate",!0),P(this,"rotateSpeed",1),P(this,"enablePan",!0),P(this,"panSpeed",1),P(this,"screenSpacePanning",!0),P(this,"keyPanSpeed",7),P(this,"autoRotate",!1),P(this,"autoRotateSpeed",2),P(this,"reverseOrbit",!1),P(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),P(this,"mouseButtons",{LEFT:Re.ROTATE,MIDDLE:Re.DOLLY,RIGHT:Re.PAN}),P(this,"touches",{ONE:ve.ROTATE,TWO:ve.DOLLY_PAN}),P(this,"target0",void 0),P(this,"position0",void 0),P(this,"zoom0",void 0),P(this,"_domElementKeyEvents",null),P(this,"getPolarAngle",void 0),P(this,"getAzimuthalAngle",void 0),P(this,"setPolarAngle",void 0),P(this,"setAzimuthalAngle",void 0),P(this,"getDistance",void 0),P(this,"listenToKeyEvents",void 0),P(this,"saveState",void 0),P(this,"reset",void 0),P(this,"update",void 0),P(this,"connect",void 0),P(this,"dispose",void 0),this.object=t,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof oe?this.object.zoom:1,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=f=>{let b=Dt(f,2*Math.PI),L=u.phi;L<0&&(L+=2*Math.PI),b<0&&(b+=2*Math.PI);let C=Math.abs(b-L);2*Math.PI-C<C&&(b<L?b+=2*Math.PI:L+=2*Math.PI),d.phi=b-L,e.update()},this.setAzimuthalAngle=f=>{let b=Dt(f,2*Math.PI),L=u.theta;L<0&&(L+=2*Math.PI),b<0&&(b+=2*Math.PI);let C=Math.abs(b-L);2*Math.PI-C<C&&(b<L?b+=2*Math.PI:L+=2*Math.PI),d.theta=b-L,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=f=>{f.addEventListener("keydown",Ke),this._domElementKeyEvents=f},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object instanceof oe?e.object.zoom:1},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object instanceof oe&&(e.object.zoom=e.zoom0,e.object.updateProjectionMatrix()),e.dispatchEvent(s),e.update(),a=i.NONE},this.update=(()=>{const f=new k,b=new Qe().setFromUnitVectors(t.up,new k(0,1,0)),L=b.clone().invert(),C=new k,B=new Qe,ee=2*Math.PI;return function(){const wt=e.object.position;f.copy(wt).sub(e.target),f.applyQuaternion(b),u.setFromVector3(f),e.autoRotate&&a===i.NONE&&U(N()),e.enableDamping?(u.theta+=d.theta*e.dampingFactor,u.phi+=d.phi*e.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let se=e.minAzimuthAngle,re=e.maxAzimuthAngle;return isFinite(se)&&isFinite(re)&&(se<-Math.PI?se+=ee:se>Math.PI&&(se-=ee),re<-Math.PI?re+=ee:re>Math.PI&&(re-=ee),se<=re?u.theta=Math.max(se,Math.min(re,u.theta)):u.theta=u.theta>(se+re)/2?Math.max(se,u.theta):Math.min(re,u.theta)),u.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=h,u.radius=Math.max(e.minDistance,Math.min(e.maxDistance,u.radius)),e.enableDamping===!0?e.target.addScaledVector(p,e.dampingFactor):e.target.add(p),f.setFromSpherical(u),f.applyQuaternion(L),wt.copy(e.target).add(f),e.object.lookAt(e.target),e.enableDamping===!0?(d.theta*=1-e.dampingFactor,d.phi*=1-e.dampingFactor,p.multiplyScalar(1-e.dampingFactor)):(d.set(0,0,0),p.set(0,0,0)),h=1,y||C.distanceToSquared(e.object.position)>c||8*(1-B.dot(e.object.quaternion))>c?(e.dispatchEvent(s),C.copy(e.object.position),B.copy(e.object.quaternion),y=!1,!0):!1}})(),this.connect=f=>{f===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),e.domElement=f,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",J),e.domElement.addEventListener("pointerdown",$),e.domElement.addEventListener("pointercancel",_e),e.domElement.addEventListener("wheel",Be)},this.dispose=()=>{var f,b,L,C,B,ee;(f=e.domElement)===null||f===void 0||f.removeEventListener("contextmenu",J),(b=e.domElement)===null||b===void 0||b.removeEventListener("pointerdown",$),(L=e.domElement)===null||L===void 0||L.removeEventListener("pointercancel",_e),(C=e.domElement)===null||C===void 0||C.removeEventListener("wheel",Be),(B=e.domElement)===null||B===void 0||B.ownerDocument.removeEventListener("pointermove",Ee),(ee=e.domElement)===null||ee===void 0||ee.ownerDocument.removeEventListener("pointerup",pe),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",Ke)};const e=this,s={type:"change"},r={type:"start"},o={type:"end"},i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=i.NONE;const c=1e-6,u=new _t,d=new _t;let h=1;const p=new k;let y=!1;const m=new W,g=new W,A=new W,v=new W,T=new W,R=new W,M=new W,w=new W,O=new W,E=[],S={};function N(){return 2*Math.PI/60/60*e.autoRotateSpeed}function I(){return Math.pow(.95,e.zoomSpeed)}function U(f){e.reverseOrbit?d.theta+=f:d.theta-=f}function G(f){e.reverseOrbit?d.phi+=f:d.phi-=f}const Y=(()=>{const f=new k;return function(L,C){f.setFromMatrixColumn(C,0),f.multiplyScalar(-L),p.add(f)}})(),j=(()=>{const f=new k;return function(L,C){e.screenSpacePanning===!0?f.setFromMatrixColumn(C,1):(f.setFromMatrixColumn(C,0),f.crossVectors(e.object.up,f)),f.multiplyScalar(L),p.add(f)}})(),z=(()=>{const f=new k;return function(L,C){const B=e.domElement;if(B&&e.object instanceof oe&&e.object.isPerspectiveCamera){const ee=e.object.position;f.copy(ee).sub(e.target);let ze=f.length();ze*=Math.tan(e.object.fov/2*Math.PI/180),Y(2*L*ze/B.clientHeight,e.object.matrix),j(2*C*ze/B.clientHeight,e.object.matrix)}else B&&e.object instanceof we&&e.object.isOrthographicCamera?(Y(L*(e.object.right-e.object.left)/e.object.zoom/B.clientWidth,e.object.matrix),j(C*(e.object.top-e.object.bottom)/e.object.zoom/B.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function H(f){e.object instanceof oe&&e.object.isPerspectiveCamera?h/=f:e.object instanceof we&&e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom*f)),e.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function de(f){e.object instanceof oe&&e.object.isPerspectiveCamera?h*=f:e.object instanceof we&&e.object.isOrthographicCamera?(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/f)),e.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function fe(f){m.set(f.clientX,f.clientY)}function he(f){M.set(f.clientX,f.clientY)}function Ae(f){v.set(f.clientX,f.clientY)}function ae(f){g.set(f.clientX,f.clientY),A.subVectors(g,m).multiplyScalar(e.rotateSpeed);const b=e.domElement;b&&(U(2*Math.PI*A.x/b.clientHeight),G(2*Math.PI*A.y/b.clientHeight)),m.copy(g),e.update()}function q(f){w.set(f.clientX,f.clientY),O.subVectors(w,M),O.y>0?H(I()):O.y<0&&de(I()),M.copy(w),e.update()}function Te(f){T.set(f.clientX,f.clientY),R.subVectors(T,v).multiplyScalar(e.panSpeed),z(R.x,R.y),v.copy(T),e.update()}function be(f){f.deltaY<0?de(I()):f.deltaY>0&&H(I()),e.update()}function He(f){let b=!1;switch(f.code){case e.keys.UP:z(0,e.keyPanSpeed),b=!0;break;case e.keys.BOTTOM:z(0,-e.keyPanSpeed),b=!0;break;case e.keys.LEFT:z(e.keyPanSpeed,0),b=!0;break;case e.keys.RIGHT:z(-e.keyPanSpeed,0),b=!0;break}b&&(f.preventDefault(),e.update())}function Ge(){if(E.length==1)m.set(E[0].pageX,E[0].pageY);else{const f=.5*(E[0].pageX+E[1].pageX),b=.5*(E[0].pageY+E[1].pageY);m.set(f,b)}}function ne(){if(E.length==1)v.set(E[0].pageX,E[0].pageY);else{const f=.5*(E[0].pageX+E[1].pageX),b=.5*(E[0].pageY+E[1].pageY);v.set(f,b)}}function Pe(){const f=E[0].pageX-E[1].pageX,b=E[0].pageY-E[1].pageY,L=Math.sqrt(f*f+b*b);M.set(0,L)}function K(){e.enableZoom&&Pe(),e.enablePan&&ne()}function F(){e.enableZoom&&Pe(),e.enableRotate&&Ge()}function Z(f){if(E.length==1)g.set(f.pageX,f.pageY);else{const L=et(f),C=.5*(f.pageX+L.x),B=.5*(f.pageY+L.y);g.set(C,B)}A.subVectors(g,m).multiplyScalar(e.rotateSpeed);const b=e.domElement;b&&(U(2*Math.PI*A.x/b.clientHeight),G(2*Math.PI*A.y/b.clientHeight)),m.copy(g)}function V(f){if(E.length==1)T.set(f.pageX,f.pageY);else{const b=et(f),L=.5*(f.pageX+b.x),C=.5*(f.pageY+b.y);T.set(L,C)}R.subVectors(T,v).multiplyScalar(e.panSpeed),z(R.x,R.y),v.copy(T)}function ce(f){const b=et(f),L=f.pageX-b.x,C=f.pageY-b.y,B=Math.sqrt(L*L+C*C);w.set(0,B),O.set(0,Math.pow(w.y/M.y,e.zoomSpeed)),H(O.y),M.copy(w)}function xe(f){e.enableZoom&&ce(f),e.enablePan&&V(f)}function Ye(f){e.enableZoom&&ce(f),e.enableRotate&&Z(f)}function $(f){if(e.enabled!==!1){if(E.length===0){var b,L;(b=e.domElement)===null||b===void 0||b.ownerDocument.addEventListener("pointermove",Ee),(L=e.domElement)===null||L===void 0||L.ownerDocument.addEventListener("pointerup",pe)}dn(f),f.pointerType==="touch"?$e(f):qe(f)}}function Ee(f){e.enabled!==!1&&(f.pointerType==="touch"?Je(f):Ze(f))}function pe(f){if(Rt(f),E.length===0){var b,L,C;(b=e.domElement)===null||b===void 0||b.releasePointerCapture(f.pointerId),(L=e.domElement)===null||L===void 0||L.ownerDocument.removeEventListener("pointermove",Ee),(C=e.domElement)===null||C===void 0||C.ownerDocument.removeEventListener("pointerup",pe)}e.dispatchEvent(o),a=i.NONE}function _e(f){Rt(f)}function qe(f){let b;switch(f.button){case 0:b=e.mouseButtons.LEFT;break;case 1:b=e.mouseButtons.MIDDLE;break;case 2:b=e.mouseButtons.RIGHT;break;default:b=-1}switch(b){case Re.DOLLY:if(e.enableZoom===!1)return;he(f),a=i.DOLLY;break;case Re.ROTATE:if(f.ctrlKey||f.metaKey||f.shiftKey){if(e.enablePan===!1)return;Ae(f),a=i.PAN}else{if(e.enableRotate===!1)return;fe(f),a=i.ROTATE}break;case Re.PAN:if(f.ctrlKey||f.metaKey||f.shiftKey){if(e.enableRotate===!1)return;fe(f),a=i.ROTATE}else{if(e.enablePan===!1)return;Ae(f),a=i.PAN}break;default:a=i.NONE}a!==i.NONE&&e.dispatchEvent(r)}function Ze(f){if(e.enabled!==!1)switch(a){case i.ROTATE:if(e.enableRotate===!1)return;ae(f);break;case i.DOLLY:if(e.enableZoom===!1)return;q(f);break;case i.PAN:if(e.enablePan===!1)return;Te(f);break}}function Be(f){e.enabled===!1||e.enableZoom===!1||a!==i.NONE&&a!==i.ROTATE||(f.preventDefault(),e.dispatchEvent(r),be(f),e.dispatchEvent(o))}function Ke(f){e.enabled===!1||e.enablePan===!1||He(f)}function $e(f){switch(vt(f),E.length){case 1:switch(e.touches.ONE){case ve.ROTATE:if(e.enableRotate===!1)return;Ge(),a=i.TOUCH_ROTATE;break;case ve.PAN:if(e.enablePan===!1)return;ne(),a=i.TOUCH_PAN;break;default:a=i.NONE}break;case 2:switch(e.touches.TWO){case ve.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;K(),a=i.TOUCH_DOLLY_PAN;break;case ve.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;F(),a=i.TOUCH_DOLLY_ROTATE;break;default:a=i.NONE}break;default:a=i.NONE}a!==i.NONE&&e.dispatchEvent(r)}function Je(f){switch(vt(f),a){case i.TOUCH_ROTATE:if(e.enableRotate===!1)return;Z(f),e.update();break;case i.TOUCH_PAN:if(e.enablePan===!1)return;V(f),e.update();break;case i.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;xe(f),e.update();break;case i.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ye(f),e.update();break;default:a=i.NONE}}function J(f){e.enabled!==!1&&f.preventDefault()}function dn(f){E.push(f)}function Rt(f){delete S[f.pointerId];for(let b=0;b<E.length;b++)if(E[b].pointerId==f.pointerId){E.splice(b,1);return}}function vt(f){let b=S[f.pointerId];b===void 0&&(b=new W,S[f.pointerId]=b),b.set(f.pageX,f.pageY)}function et(f){const b=f.pointerId===E[0].pointerId?E[1]:E[0];return S[b.pointerId]}n!==void 0&&this.connect(n),this.update()}};class Ms extends mt{constructor(t,n,e,s){super();const r=[],o=[],i=[],a=new k,c=new te;c.makeRotationFromEuler(e),c.setPosition(n);const u=new te;u.copy(c).invert(),d(),this.setAttribute("position",new tt(r,3)),this.setAttribute("normal",new tt(o,3)),this.setAttribute("uv",new tt(i,2));function d(){let m,g=[];const A=new k,v=new k;if(t.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const T=t.geometry,R=T.attributes.position,M=T.attributes.normal;if(T.index!==null){const w=T.index;for(m=0;m<w.count;m++)A.fromBufferAttribute(R,w.getX(m)),v.fromBufferAttribute(M,w.getX(m)),h(g,A,v)}else for(m=0;m<R.count;m++)A.fromBufferAttribute(R,m),v.fromBufferAttribute(M,m),h(g,A,v);for(g=p(g,a.set(1,0,0)),g=p(g,a.set(-1,0,0)),g=p(g,a.set(0,1,0)),g=p(g,a.set(0,-1,0)),g=p(g,a.set(0,0,1)),g=p(g,a.set(0,0,-1)),m=0;m<g.length;m++){const w=g[m];i.push(.5+w.position.x/s.x,.5+w.position.y/s.y),w.position.applyMatrix4(c),r.push(w.position.x,w.position.y,w.position.z),o.push(w.normal.x,w.normal.y,w.normal.z)}}function h(m,g,A){g.applyMatrix4(t.matrixWorld),g.applyMatrix4(u),A.transformDirection(t.matrixWorld),m.push(new kt(g.clone(),A.clone()))}function p(m,g){const A=[],v=.5*Math.abs(s.dot(g));for(let T=0;T<m.length;T+=3){let R,M,w,O=0,E,S,N,I;const U=m[T+0].position.dot(g)-v,G=m[T+1].position.dot(g)-v,Y=m[T+2].position.dot(g)-v;switch(R=U>0,M=G>0,w=Y>0,O=(R?1:0)+(M?1:0)+(w?1:0),O){case 0:{A.push(m[T]),A.push(m[T+1]),A.push(m[T+2]);break}case 1:{if(R&&(E=m[T+1],S=m[T+2],N=y(m[T],E,g,v),I=y(m[T],S,g,v)),M){E=m[T],S=m[T+2],N=y(m[T+1],E,g,v),I=y(m[T+1],S,g,v),A.push(N),A.push(S.clone()),A.push(E.clone()),A.push(S.clone()),A.push(N.clone()),A.push(I);break}w&&(E=m[T],S=m[T+1],N=y(m[T+2],E,g,v),I=y(m[T+2],S,g,v)),A.push(E.clone()),A.push(S.clone()),A.push(N),A.push(I),A.push(N.clone()),A.push(S.clone());break}case 2:{R||(E=m[T].clone(),S=y(E,m[T+1],g,v),N=y(E,m[T+2],g,v),A.push(E),A.push(S),A.push(N)),M||(E=m[T+1].clone(),S=y(E,m[T+2],g,v),N=y(E,m[T],g,v),A.push(E),A.push(S),A.push(N)),w||(E=m[T+2].clone(),S=y(E,m[T],g,v),N=y(E,m[T+1],g,v),A.push(E),A.push(S),A.push(N));break}}}return A}function y(m,g,A,v){const T=m.position.dot(A)-v,R=g.position.dot(A)-v,M=T/(T-R);return new kt(new k(m.position.x+M*(g.position.x-m.position.x),m.position.y+M*(g.position.y-m.position.y),m.position.z+M*(g.position.z-m.position.z)),new k(m.normal.x+M*(g.normal.x-m.normal.x),m.normal.y+M*(g.normal.y-m.normal.y),m.normal.z+M*(g.normal.z-m.normal.z)))}}}class kt{constructor(t,n){this.position=t,this.normal=n}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}function Ss(l){return Array.isArray(l)}function rt(l=[0,0,0]){return Ss(l)?l:l instanceof k||l instanceof Qt?[l.x,l.y,l.z]:[l,l,l]}const Ls=x.forwardRef(function({debug:t,mesh:n,children:e,position:s,rotation:r,scale:o,...i},a){const c=x.useRef(null);x.useImperativeHandle(a,()=>c.current);const u=x.useRef(null);return x.useLayoutEffect(()=>{const d=(n==null?void 0:n.current)||c.current.parent,h=c.current;if(!(d instanceof Vt))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const p={position:new k,rotation:new Qt,scale:new k(1,1,1)};if(d){Ve(p,{position:s,scale:o});const y=d.matrixWorld.clone();if(d.matrixWorld.identity(),!r||typeof r=="number"){const m=new gt;m.position.copy(p.position),m.lookAt(d.position),typeof r=="number"&&m.rotateZ(r),Ve(p,{rotation:m.rotation})}else Ve(p,{rotation:r});return h.geometry=new Ms(d,p.position,p.rotation,p.scale),u.current&&Ve(u.current,p),d.matrixWorld=y,()=>{h.geometry.dispose()}}},[n,...rt(s),...rt(o),...rt(r)]),x.createElement("mesh",{ref:c},e||x.createElement("meshStandardMaterial",Se({transparent:!0,polygonOffset:!0,polygonOffsetFactor:-10},i)),t&&x.createElement("mesh",{ref:u},x.createElement("boxGeometry",null),x.createElement("meshNormalMaterial",{wireframe:!0}),x.createElement("axesHelper",null)))}),cn=x.forwardRef(({makeDefault:l,camera:t,regress:n,domElement:e,enableDamping:s=!0,onChange:r,onStart:o,onEnd:i,...a},c)=>{const u=X(M=>M.invalidate),d=X(M=>M.camera),h=X(M=>M.gl),p=X(M=>M.events),y=X(M=>M.setEvents),m=X(M=>M.set),g=X(M=>M.get),A=X(M=>M.performance),v=t||d,T=e||p.connected||h.domElement,R=x.useMemo(()=>new ws(v),[v]);return Le(()=>{R.enabled&&R.update()},-1),x.useEffect(()=>(R.connect(T),()=>void R.dispose()),[T,n,R,u]),x.useEffect(()=>{const M=E=>{u(),n&&A.regress(),r&&r(E)},w=E=>{o&&o(E)},O=E=>{i&&i(E)};return R.addEventListener("change",M),R.addEventListener("start",w),R.addEventListener("end",O),()=>{R.removeEventListener("start",w),R.removeEventListener("end",O),R.removeEventListener("change",M)}},[r,o,i,R,u,y]),x.useEffect(()=>{if(l){const M=g().controls;return m({controls:R}),()=>m({controls:M})}},[l,R]),x.createElement("primitive",Se({ref:c,object:R,enableDamping:s},a))}),Ps=x.forwardRef(({children:l,enabled:t=!0,speed:n=1,rotationIntensity:e=1,floatIntensity:s=1,floatingRange:r=[-.1,.1],...o},i)=>{const a=x.useRef(null),c=x.useRef(Math.random()*1e4);return Le(u=>{var d,h;if(!t||n===0)return;const p=c.current+u.clock.getElapsedTime();a.current.rotation.x=Math.cos(p/4*n)/8*e,a.current.rotation.y=Math.sin(p/4*n)/8*e,a.current.rotation.z=Math.sin(p/4*n)/20*e;let y=Math.sin(p/4*n)/10;y=Yt.mapLinear(y,-.1,.1,(d=r==null?void 0:r[0])!==null&&d!==void 0?d:-.1,(h=r==null?void 0:r[1])!==null&&h!==void 0?h:.1),a.current.position.y=y*s,a.current.updateMatrix()}),x.createElement("group",o,x.createElement("group",{ref:Xt([a,i]),matrixAutoUpdate:!1},l))});class _s extends vn{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new k(0,0,0)},lightColor:{value:new ie("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new W(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      varying float vViewZ;
      varying float vIntensity;
      uniform vec3 spotPosition;
      uniform float attenuation;      

      void main() {
        // compute intensity
        vNormal = normalize( normalMatrix * normal );
        vec4 worldPosition	= modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;
        vec4 viewPosition = viewMatrix * worldPosition;
        vViewZ = viewPosition.z;
        float intensity	= distance(worldPosition.xyz, spotPosition) / attenuation;
        intensity	= 1.0 - clamp(intensity, 0.0, 1.0);
        vIntensity = intensity;        
        // set gl_Position
        gl_Position	= projectionMatrix * viewPosition;

      }`,fragmentShader:`
      #include <packing>

      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      uniform vec3 lightColor;
      uniform vec3 spotPosition;
      uniform float attenuation;
      uniform float anglePower;
      uniform sampler2D depth;
      uniform vec2 resolution;
      uniform float cameraNear;
      uniform float cameraFar;
      varying float vViewZ;
      varying float vIntensity;
      uniform float opacity;

      float readDepth( sampler2D depthSampler, vec2 coord ) {
        float fragCoordZ = texture2D( depthSampler, coord ).x;
        float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
        return viewZ;
      }

      void main() {
        float d = 1.0;
        bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
        if (isSoft) {
          vec2 sUv = gl_FragCoord.xy / resolution;
          d = readDepth(depth, sUv);
        }
        float intensity = vIntensity;
        vec3 normal	= vec3(vNormal.x, vNormal.y, abs(vNormal.z));
        float angleIntensity	= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );
        intensity	*= angleIntensity;
        // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
        if (isSoft) {
          intensity	*= smoothstep(0., 1., vViewZ - d);
        }
        gl_FragColor = vec4(lightColor, intensity * opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}function Os({opacity:l=1,radiusTop:t,radiusBottom:n,depthBuffer:e,color:s="white",distance:r=5,angle:o=.15,attenuation:i=5,anglePower:a=5}){const c=x.useRef(null),u=X(g=>g.size),d=X(g=>g.camera),h=X(g=>g.viewport.dpr),[p]=x.useState(()=>new _s),[y]=x.useState(()=>new k);t=t===void 0?.1:t,n=n===void 0?o*7:n,Le(()=>{p.uniforms.spotPosition.value.copy(c.current.getWorldPosition(y)),c.current.lookAt(c.current.parent.target.getWorldPosition(y))});const m=x.useMemo(()=>{const g=new wn(t,n,r,128,64,!0);return g.applyMatrix4(new te().makeTranslation(0,-r/2,0)),g.applyMatrix4(new te().makeRotationX(-Math.PI/2)),g},[r,t,n]);return x.createElement(x.Fragment,null,x.createElement("mesh",{ref:c,geometry:m,raycast:()=>null},x.createElement("primitive",{object:p,attach:"material","uniforms-opacity-value":l,"uniforms-lightColor-value":s,"uniforms-attenuation-value":i,"uniforms-anglePower-value":a,"uniforms-depth-value":e,"uniforms-cameraNear-value":d.near,"uniforms-cameraFar-value":d.far,"uniforms-resolution-value":e?[u.width*h,u.height*h]:[0,0]})))}const Is=x.forwardRef(({opacity:l=1,radiusTop:t,radiusBottom:n,depthBuffer:e,color:s="white",distance:r=5,angle:o=.15,attenuation:i=5,anglePower:a=5,volumetric:c=!0,debug:u=!1,children:d,...h},p)=>{const y=x.useRef(null);return x.createElement("group",null,u&&y.current&&x.createElement("spotLightHelper",{args:[y.current]}),x.createElement("spotLight",Se({ref:Xt([p,y]),angle:o,color:s,distance:r,castShadow:!0},h),c&&x.createElement(Os,{debug:u,opacity:l,radiusTop:t,radiusBottom:n,depthBuffer:e,color:s,distance:r,angle:o,attenuation:i,anglePower:a})),d&&x.cloneElement(d,{spotlightRef:y,debug:u}))}),bt=()=>{const{progress:l}=Es();return D.jsxs(xs,{children:[D.jsx("span",{className:"canvas-load"}),D.jsxs("p",{style:{fontsize:14,color:"#F1F1F1",fontWeight:800,marginTop:20,marginLeft:-25},children:[l.toFixed(2),"%"]})]})},Cs=l=>{const t=on(l,()=>new Promise((n,e)=>new qt().load(l,n,e)),{staleTime:1/0,cacheTime:1/0});return{data:t.data,isLoading:t.isLoading}},xt=x.memo(({imgUrl:l,inView:t})=>{const{data:n,isLoading:e}=Cs(t?l:null),s=x.useRef();Le(({camera:o})=>{if(!s.current)return;const i=new $t;i.setFromProjectionMatrix(new te().multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse));const a=new yt().setFromObject(s.current);!i.intersectsBox(a)&&s.current&&s.current.traverse(u=>{if(u.isMesh)if(u.geometry.dispose(),u.material.isMaterial)r(u.material);else for(const d of u.material)r(d)})});const r=o=>{o.dispose();for(const i of Object.keys(o)){const a=o[i];a&&typeof a=="object"&&"minFilter"in a&&a.dispose()}};return e?null:D.jsxs(Ps,{speed:0,rotationIntensity:0,floatIntensity:0,children:[D.jsx("ambientLight",{intensity:.25}),D.jsx("directionalLight",{position:[0,0,.05]}),D.jsx(Is,{position:[0,5,10],angle:.3,penumbra:1,castShadow:!0}),D.jsxs("mesh",{ref:s,castShadow:!0,receiveShadow:!0,scale:2.3,children:[D.jsx("icosahedronGeometry",{args:[1,1]}),D.jsx("meshLambertMaterial",{color:"#FFF8EB",polygonOffset:!0,polygonOffsetFactor:-5,flatShading:!0}),D.jsx(Ls,{position:[0,0,1],map:n,rotation:[2*Math.PI,0,6.25],flatShading:!0})]})]})},(l,t)=>l.imgUrl===t.imgUrl&&l.inView===t.inView);xt.displayName="Ball";xt.propTypes={imgUrl:Fe.string.isRequired,inView:Fe.bool.isRequired};const Ns=({icon:l})=>{const{setContext:t}=Kt(),{ref:n,inView:e}=zt({triggerOnce:!1,threshold:0,rootMargin:"100% 0px"}),s=({gl:r})=>{t(r)};return D.jsx("div",{ref:n,children:e&&D.jsxs(Zt,{frameloop:"demand",gl:{preserveDrawingBuffer:!0},onCreated:s,children:[D.jsxs(x.Suspense,{fallback:D.jsx(bt,{}),children:[D.jsx(cn,{enableZoom:!1}),D.jsx(xt,{imgUrl:l,inView:e})]}),D.jsx(Mn,{all:!0})]})})};Ns.propTypes={icon:Fe.string.isRequired};function Ft(l,t){if(t===Sn)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),l;if(t===ct||t===Jt){let n=l.getIndex();if(n===null){const o=[],i=l.getAttribute("position");if(i!==void 0){for(let a=0;a<i.count;a++)o.push(a);l.setIndex(o),n=l.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),l}const e=n.count-2,s=[];if(t===ct)for(let o=1;o<=e;o++)s.push(n.getX(0)),s.push(n.getX(o)),s.push(n.getX(o+1));else for(let o=0;o<e;o++)o%2===0?(s.push(n.getX(o)),s.push(n.getX(o+1)),s.push(n.getX(o+2))):(s.push(n.getX(o+2)),s.push(n.getX(o+1)),s.push(n.getX(o)));s.length/3!==e&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=l.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),l}class Ds extends en{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new Hs(n)}),this.register(function(n){return new Qs(n)}),this.register(function(n){return new Xs(n)}),this.register(function(n){return new Ys(n)}),this.register(function(n){return new Bs(n)}),this.register(function(n){return new Ks(n)}),this.register(function(n){return new zs(n)}),this.register(function(n){return new Ws(n)}),this.register(function(n){return new Us(n)}),this.register(function(n){return new Vs(n)}),this.register(function(n){return new Gs(n)}),this.register(function(n){return new Fs(n)}),this.register(function(n){return new qs(n)}),this.register(function(n){return new Zs(n)})}load(t,n,e,s){const r=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=lt.extractUrlBase(t),this.manager.itemStart(t);const i=function(c){s?s(c):console.error(c),r.manager.itemError(t),r.manager.itemEnd(t)},a=new Xe(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(c){try{r.parse(c,o,function(u){n(u),r.manager.itemEnd(t)},i)}catch(u){i(u)}},e,i)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,e,s){let r;const o={},i={},a=new TextDecoder;if(typeof t=="string")r=JSON.parse(t);else if(t instanceof ArrayBuffer)if(a.decode(new Uint8Array(t,0,4))===ln){try{o[_.KHR_BINARY_GLTF]=new $s(t)}catch(d){s&&s(d);return}r=JSON.parse(o[_.KHR_BINARY_GLTF].content)}else r=JSON.parse(a.decode(t));else r=t;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new dr(r,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);i[d.name]=d,o[d.name]=!0}if(r.extensionsUsed)for(let u=0;u<r.extensionsUsed.length;++u){const d=r.extensionsUsed[u],h=r.extensionsRequired||[];switch(d){case _.KHR_MATERIALS_UNLIT:o[d]=new js;break;case _.KHR_DRACO_MESH_COMPRESSION:o[d]=new Js(r,this.dracoLoader);break;case _.KHR_TEXTURE_TRANSFORM:o[d]=new er;break;case _.KHR_MESH_QUANTIZATION:o[d]=new tr;break;default:h.indexOf(d)>=0&&i[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(i),c.parse(e,s)}parseAsync(t,n){const e=this;return new Promise(function(s,r){e.parse(t,n,s,r)})}}function ks(){let l={};return{get:function(t){return l[t]},add:function(t,n){l[t]=n},remove:function(t){delete l[t]},removeAll:function(){l={}}}}const _={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Fs{constructor(t){this.parser=t,this.name=_.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let e=0,s=n.length;e<s;e++){const r=n[e];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(t){const n=this.parser,e="light:"+t;let s=n.cache.get(e);if(s)return s;const r=n.json,a=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let c;const u=new ie(16777215);a.color!==void 0&&u.fromArray(a.color);const d=a.range!==void 0?a.range:0;switch(a.type){case"directional":c=new _n(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Pn(u),c.distance=d;break;case"spot":c=new Ln(u),c.distance=d,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,c.angle=a.spot.outerConeAngle,c.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return c.position.set(0,0,0),c.decay=2,ue(c,a),a.intensity!==void 0&&(c.intensity=a.intensity),c.name=n.createUniqueName(a.name||"light_"+t),s=Promise.resolve(c),n.cache.add(e,s),s}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,e=this.parser,r=e.json.nodes[t],i=(r.extensions&&r.extensions[this.name]||{}).light;return i===void 0?null:this._loadLight(i).then(function(a){return e._getNodeRef(n.cache,i,a)})}}class js{constructor(){this.name=_.KHR_MATERIALS_UNLIT}getMaterialType(){return De}extendParams(t,n,e){const s=[];t.color=new ie(1,1,1),t.opacity=1;const r=n.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(e.assignTexture(t,"map",r.baseColorTexture,ge))}return Promise.all(s)}}class Us{constructor(t){this.parser=t,this.name=_.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(n.emissiveIntensity=r),Promise.resolve()}}class Hs{constructor(t){this.parser=t,this.name=_.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:ye}extendMaterialParams(t,n){const e=this.parser,s=e.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(n.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(e.assignTexture(n,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(e.assignTexture(n,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(e.assignTexture(n,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const i=o.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new W(i,i)}return Promise.all(r)}}class Gs{constructor(t){this.parser=t,this.name=_.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:ye}extendMaterialParams(t,n){const e=this.parser,s=e.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(n.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(e.assignTexture(n,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(n.iridescenceIOR=o.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(e.assignTexture(n,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class Bs{constructor(t){this.parser=t,this.name=_.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:ye}extendMaterialParams(t,n){const e=this.parser,s=e.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];n.sheenColor=new ie(0,0,0),n.sheenRoughness=0,n.sheen=1;const o=s.extensions[this.name];return o.sheenColorFactor!==void 0&&n.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(e.assignTexture(n,"sheenColorMap",o.sheenColorTexture,ge)),o.sheenRoughnessTexture!==void 0&&r.push(e.assignTexture(n,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class Ks{constructor(t){this.parser=t,this.name=_.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:ye}extendMaterialParams(t,n){const e=this.parser,s=e.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(n.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(e.assignTexture(n,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class zs{constructor(t){this.parser=t,this.name=_.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:ye}extendMaterialParams(t,n){const e=this.parser,s=e.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];n.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(e.assignTexture(n,"thicknessMap",o.thicknessTexture)),n.attenuationDistance=o.attenuationDistance||1/0;const i=o.attenuationColor||[1,1,1];return n.attenuationColor=new ie(i[0],i[1],i[2]),Promise.all(r)}}class Ws{constructor(t){this.parser=t,this.name=_.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:ye}extendMaterialParams(t,n){const s=this.parser.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return n.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class Vs{constructor(t){this.parser=t,this.name=_.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:ye}extendMaterialParams(t,n){const e=this.parser,s=e.json.materials[t];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];n.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(e.assignTexture(n,"specularIntensityMap",o.specularTexture));const i=o.specularColorFactor||[1,1,1];return n.specularColor=new ie(i[0],i[1],i[2]),o.specularColorTexture!==void 0&&r.push(e.assignTexture(n,"specularColorMap",o.specularColorTexture,ge)),Promise.all(r)}}class Qs{constructor(t){this.parser=t,this.name=_.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,e=n.json,s=e.textures[t];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=n.options.ktx2Loader;if(!o){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,r.source,o)}}class Xs{constructor(t){this.parser=t,this.name=_.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const n=this.name,e=this.parser,s=e.json,r=s.textures[t];if(!r.extensions||!r.extensions[n])return null;const o=r.extensions[n],i=s.images[o.source];let a=e.textureLoader;if(i.uri){const c=e.options.manager.getHandler(i.uri);c!==null&&(a=c)}return this.detectSupport().then(function(c){if(c)return e.loadTextureImage(t,o.source,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return e.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class Ys{constructor(t){this.parser=t,this.name=_.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const n=this.name,e=this.parser,s=e.json,r=s.textures[t];if(!r.extensions||!r.extensions[n])return null;const o=r.extensions[n],i=s.images[o.source];let a=e.textureLoader;if(i.uri){const c=e.options.manager.getHandler(i.uri);c!==null&&(a=c)}return this.detectSupport().then(function(c){if(c)return e.loadTextureImage(t,o.source,a);if(s.extensionsRequired&&s.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return e.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class qs{constructor(t){this.name=_.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,e=n.bufferViews[t];if(e.extensions&&e.extensions[this.name]){const s=e.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(i){const a=s.byteOffset||0,c=s.byteLength||0,u=s.count,d=s.byteStride,h=new Uint8Array(i,a,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,s.mode,s.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(p),u,d,h,s.mode,s.filter),p})})}else return null}}class Zs{constructor(t){this.name=_.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,e=n.nodes[t];if(!e.extensions||!e.extensions[this.name]||e.mesh===void 0)return null;const s=n.meshes[e.mesh];for(const c of s.primitives)if(c.mode!==Q.TRIANGLES&&c.mode!==Q.TRIANGLE_STRIP&&c.mode!==Q.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=e.extensions[this.name].attributes,i=[],a={};for(const c in o)i.push(this.parser.getDependency("accessor",o[c]).then(u=>(a[c]=u,a[c])));return i.length<1?null:(i.push(this.parser.createNodeMesh(t)),Promise.all(i).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],h=c[0].count,p=[];for(const y of d){const m=new te,g=new k,A=new Qe,v=new k(1,1,1),T=new On(y.geometry,y.material,h);for(let R=0;R<h;R++)a.TRANSLATION&&g.fromBufferAttribute(a.TRANSLATION,R),a.ROTATION&&A.fromBufferAttribute(a.ROTATION,R),a.SCALE&&v.fromBufferAttribute(a.SCALE,R),T.setMatrixAt(R,m.compose(g,A,v));for(const R in a)R!=="TRANSLATION"&&R!=="ROTATION"&&R!=="SCALE"&&y.geometry.setAttribute(R,a[R]);gt.prototype.copy.call(T,y),this.parser.assignFinalMaterial(T),p.push(T)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}}const ln="glTF",Ie=12,jt={JSON:1313821514,BIN:5130562};class $s{constructor(t){this.name=_.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,Ie),e=new TextDecoder;if(this.header={magic:e.decode(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==ln)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Ie,r=new DataView(t,Ie);let o=0;for(;o<s;){const i=r.getUint32(o,!0);o+=4;const a=r.getUint32(o,!0);if(o+=4,a===jt.JSON){const c=new Uint8Array(t,Ie+o,i);this.content=e.decode(c)}else if(a===jt.BIN){const c=Ie+o;this.body=t.slice(c,c+i)}o+=i}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Js{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=_.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const e=this.json,s=this.dracoLoader,r=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,i={},a={},c={};for(const u in o){const d=ht[u]||u.toLowerCase();i[d]=o[u]}for(const u in t.attributes){const d=ht[u]||u.toLowerCase();if(o[u]!==void 0){const h=e.accessors[t.attributes[u]],p=Me[h.componentType];c[d]=p.name,a[d]=h.normalized===!0}}return n.getDependency("bufferView",r).then(function(u){return new Promise(function(d){s.decodeDracoFile(u,function(h){for(const p in h.attributes){const y=h.attributes[p],m=a[p];m!==void 0&&(y.normalized=m)}d(h)},i,c)})})}}class er{constructor(){this.name=_.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord===void 0||n.texCoord===t.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class tr{constructor(){this.name=_.KHR_MESH_QUANTIZATION}}class un extends ss{constructor(t,n,e,s){super(t,n,e,s)}copySampleValue_(t){const n=this.resultBuffer,e=this.sampleValues,s=this.valueSize,r=t*s*3+s;for(let o=0;o!==s;o++)n[o]=e[r+o];return n}interpolate_(t,n,e,s){const r=this.resultBuffer,o=this.sampleValues,i=this.valueSize,a=i*2,c=i*3,u=s-n,d=(e-n)/u,h=d*d,p=h*d,y=t*c,m=y-c,g=-2*p+3*h,A=p-h,v=1-g,T=A-h+d;for(let R=0;R!==i;R++){const M=o[m+R+i],w=o[m+R+a]*u,O=o[y+R+i],E=o[y+R]*u;r[R]=v*M+T*w+g*O+A*E}return r}}const nr=new Qe;class sr extends un{interpolate_(t,n,e,s){const r=super.interpolate_(t,n,e,s);return nr.fromArray(r).normalize().toArray(r),r}}const Q={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Me={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ut={9728:Wn,9729:tn,9984:Vn,9985:Qn,9986:Xn,9987:nn},Ht={33071:Yn,33648:qn,10497:ut},ot={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ht={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},le={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},rr={CUBICSPLINE:void 0,LINEAR:rn,STEP:Zn},it={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function or(l){return l.DefaultMaterial===void 0&&(l.DefaultMaterial=new sn({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:$n})),l.DefaultMaterial}function Ce(l,t,n){for(const e in n.extensions)l[e]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[e]=n.extensions[e])}function ue(l,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(l.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function ir(l,t,n){let e=!1,s=!1,r=!1;for(let c=0,u=t.length;c<u;c++){const d=t[c];if(d.POSITION!==void 0&&(e=!0),d.NORMAL!==void 0&&(s=!0),d.COLOR_0!==void 0&&(r=!0),e&&s&&r)break}if(!e&&!s&&!r)return Promise.resolve(l);const o=[],i=[],a=[];for(let c=0,u=t.length;c<u;c++){const d=t[c];if(e){const h=d.POSITION!==void 0?n.getDependency("accessor",d.POSITION):l.attributes.position;o.push(h)}if(s){const h=d.NORMAL!==void 0?n.getDependency("accessor",d.NORMAL):l.attributes.normal;i.push(h)}if(r){const h=d.COLOR_0!==void 0?n.getDependency("accessor",d.COLOR_0):l.attributes.color;a.push(h)}}return Promise.all([Promise.all(o),Promise.all(i),Promise.all(a)]).then(function(c){const u=c[0],d=c[1],h=c[2];return e&&(l.morphAttributes.position=u),s&&(l.morphAttributes.normal=d),r&&(l.morphAttributes.color=h),l.morphTargetsRelative=!0,l})}function ar(l,t){if(l.updateMorphTargets(),t.weights!==void 0)for(let n=0,e=t.weights.length;n<e;n++)l.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(l.morphTargetInfluences.length===n.length){l.morphTargetDictionary={};for(let e=0,s=n.length;e<s;e++)l.morphTargetDictionary[n[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function cr(l){const t=l.extensions&&l.extensions[_.KHR_DRACO_MESH_COMPRESSION];let n;return t?n="draco:"+t.bufferView+":"+t.indices+":"+Gt(t.attributes):n=l.indices+":"+Gt(l.attributes)+":"+l.mode,n}function Gt(l){let t="";const n=Object.keys(l).sort();for(let e=0,s=n.length;e<s;e++)t+=n[e]+":"+l[n[e]]+";";return t}function pt(l){switch(l){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function lr(l){return l.search(/\.jpe?g($|\?)/i)>0||l.search(/^data\:image\/jpeg/)===0?"image/jpeg":l.search(/\.webp($|\?)/i)>0||l.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const ur=new te;class dr{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new ks,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let e=!1,s=!1,r=-1;typeof navigator<"u"&&(e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||e||s&&r<98?this.textureLoader=new qt(this.options.manager):this.textureLoader=new In(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Xe(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const e=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([e.getDependencies("scene"),e.getDependencies("animation"),e.getDependencies("camera")])}).then(function(o){const i={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:e,userData:{}};Ce(r,i,s),ue(i,s),Promise.all(e._invokeAll(function(a){return a.afterRoot&&a.afterRoot(i)})).then(function(){t(i)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],e=this.json.meshes||[];for(let s=0,r=n.length;s<r;s++){const o=n[s].joints;for(let i=0,a=o.length;i<a;i++)t[o[i]].isBone=!0}for(let s=0,r=t.length;s<r;s++){const o=t[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(e[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,e){if(t.refs[n]<=1)return e;const s=e.clone(),r=(o,i)=>{const a=this.associations.get(o);a!=null&&this.associations.set(i,a);for(const[c,u]of o.children.entries())r(u,i.children[c])};return r(e,s),s.name+="_instance_"+t.uses[n]++,s}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let e=0;e<n.length;e++){const s=t(n[e]);if(s)return s}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const e=[];for(let s=0;s<n.length;s++){const r=t(n[s]);r&&e.push(r)}return e}getDependency(t,n){const e=t+":"+n;let s=this.cache.get(e);if(!s){switch(t){case"scene":s=this.loadScene(n);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(n)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(n)});break;case"accessor":s=this.loadAccessor(n);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(n)});break;case"buffer":s=this.loadBuffer(n);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(n)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(n)});break;case"skin":s=this.loadSkin(n);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(n)});break;case"camera":s=this.loadCamera(n);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(t,n)}),!s)throw new Error("Unknown type: "+t);break}this.cache.add(e,s)}return s}getDependencies(t){let n=this.cache.get(t);if(!n){const e=this,s=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(s.map(function(r,o){return e.getDependency(t,o)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],e=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[_.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){e.load(lt.resolveURL(n.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(e){const s=n.byteLength||0,r=n.byteOffset||0;return e.slice(r,r+s)})}loadAccessor(t){const n=this,e=this.json,s=this.json.accessors[t];if(s.bufferView===void 0&&s.sparse===void 0){const o=ot[s.type],i=Me[s.componentType],a=s.normalized===!0,c=new i(s.count*o);return Promise.resolve(new ke(c,o,a))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const i=o[0],a=ot[s.type],c=Me[s.componentType],u=c.BYTES_PER_ELEMENT,d=u*a,h=s.byteOffset||0,p=s.bufferView!==void 0?e.bufferViews[s.bufferView].byteStride:void 0,y=s.normalized===!0;let m,g;if(p&&p!==d){const A=Math.floor(h/p),v="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+A+":"+s.count;let T=n.cache.get(v);T||(m=new c(i,A*p,s.count*p/u),T=new Cn(m,p/u),n.cache.add(v,T)),g=new Jn(T,a,h%p/u,y)}else i===null?m=new c(s.count*a):m=new c(i,h,s.count*a),g=new ke(m,a,y);if(s.sparse!==void 0){const A=ot.SCALAR,v=Me[s.sparse.indices.componentType],T=s.sparse.indices.byteOffset||0,R=s.sparse.values.byteOffset||0,M=new v(o[1],T,s.sparse.count*A),w=new c(o[2],R,s.sparse.count*a);i!==null&&(g=new ke(g.array.slice(),g.itemSize,g.normalized));for(let O=0,E=M.length;O<E;O++){const S=M[O];if(g.setX(S,w[O*a]),a>=2&&g.setY(S,w[O*a+1]),a>=3&&g.setZ(S,w[O*a+2]),a>=4&&g.setW(S,w[O*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(t){const n=this.json,e=this.options,r=n.textures[t].source,o=n.images[r];let i=this.textureLoader;if(o.uri){const a=e.manager.getHandler(o.uri);a!==null&&(i=a)}return this.loadTextureImage(t,r,i)}loadTextureImage(t,n,e){const s=this,r=this.json,o=r.textures[t],i=r.images[n],a=(i.uri||i.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const c=this.loadImageSource(n,e).then(function(u){u.flipY=!1,u.name=o.name||i.name||"",u.name===""&&typeof i.uri=="string"&&i.uri.startsWith("data:image/")===!1&&(u.name=i.uri);const h=(r.samplers||{})[o.sampler]||{};return u.magFilter=Ut[h.magFilter]||tn,u.minFilter=Ut[h.minFilter]||nn,u.wrapS=Ht[h.wrapS]||ut,u.wrapT=Ht[h.wrapT]||ut,s.associations.set(u,{textures:t}),u}).catch(function(){return null});return this.textureCache[a]=c,c}loadImageSource(t,n){const e=this,s=this.json,r=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(d=>d.clone());const o=s.images[t],i=self.URL||self.webkitURL;let a=o.uri||"",c=!1;if(o.bufferView!==void 0)a=e.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:o.mimeType});return a=i.createObjectURL(h),a});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const u=Promise.resolve(a).then(function(d){return new Promise(function(h,p){let y=h;n.isImageBitmapLoader===!0&&(y=function(m){const g=new Ot(m);g.needsUpdate=!0,h(g)}),n.load(lt.resolveURL(d,r.path),y,void 0,p)})}).then(function(d){return c===!0&&i.revokeObjectURL(a),d.userData.mimeType=o.mimeType||lr(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),d});return this.sourceCache[t]=u,u}assignTexture(t,n,e,s){const r=this;return this.getDependency("texture",e.index).then(function(o){if(!o)return null;if(e.texCoord!==void 0&&e.texCoord>0&&(o=o.clone(),o.channel=e.texCoord),r.extensions[_.KHR_TEXTURE_TRANSFORM]){const i=e.extensions!==void 0?e.extensions[_.KHR_TEXTURE_TRANSFORM]:void 0;if(i){const a=r.associations.get(o);o=r.extensions[_.KHR_TEXTURE_TRANSFORM].extendTexture(o,i),r.associations.set(o,a)}}return s!==void 0&&(o.colorSpace=s),t[n]=o,o})}assignFinalMaterial(t){const n=t.geometry;let e=t.material;const s=n.attributes.tangent===void 0,r=n.attributes.color!==void 0,o=n.attributes.normal===void 0;if(t.isPoints){const i="PointsMaterial:"+e.uuid;let a=this.cache.get(i);a||(a=new Nn,nt.prototype.copy.call(a,e),a.color.copy(e.color),a.map=e.map,a.sizeAttenuation=!1,this.cache.add(i,a)),e=a}else if(t.isLine){const i="LineBasicMaterial:"+e.uuid;let a=this.cache.get(i);a||(a=new Dn,nt.prototype.copy.call(a,e),a.color.copy(e.color),a.map=e.map,this.cache.add(i,a)),e=a}if(s||r||o){let i="ClonedMaterial:"+e.uuid+":";s&&(i+="derivative-tangents:"),r&&(i+="vertex-colors:"),o&&(i+="flat-shading:");let a=this.cache.get(i);a||(a=e.clone(),r&&(a.vertexColors=!0),o&&(a.flatShading=!0),s&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(i,a),this.associations.set(a,this.associations.get(e))),e=a}t.material=e}getMaterialType(){return sn}loadMaterial(t){const n=this,e=this.json,s=this.extensions,r=e.materials[t];let o;const i={},a=r.extensions||{},c=[];if(a[_.KHR_MATERIALS_UNLIT]){const d=s[_.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(i,r,n))}else{const d=r.pbrMetallicRoughness||{};if(i.color=new ie(1,1,1),i.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;i.color.fromArray(h),i.opacity=h[3]}d.baseColorTexture!==void 0&&c.push(n.assignTexture(i,"map",d.baseColorTexture,ge)),i.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,i.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(n.assignTexture(i,"metalnessMap",d.metallicRoughnessTexture)),c.push(n.assignTexture(i,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(t)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(t,i)})))}r.doubleSided===!0&&(i.side=Wt);const u=r.alphaMode||it.OPAQUE;if(u===it.BLEND?(i.transparent=!0,i.depthWrite=!1):(i.transparent=!1,u===it.MASK&&(i.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==De&&(c.push(n.assignTexture(i,"normalMap",r.normalTexture)),i.normalScale=new W(1,1),r.normalTexture.scale!==void 0)){const d=r.normalTexture.scale;i.normalScale.set(d,d)}return r.occlusionTexture!==void 0&&o!==De&&(c.push(n.assignTexture(i,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(i.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==De&&(i.emissive=new ie().fromArray(r.emissiveFactor)),r.emissiveTexture!==void 0&&o!==De&&c.push(n.assignTexture(i,"emissiveMap",r.emissiveTexture,ge)),Promise.all(c).then(function(){const d=new o(i);return r.name&&(d.name=r.name),ue(d,r),n.associations.set(d,{materials:t}),r.extensions&&Ce(s,d,r),d})}createUniqueName(t){const n=kn.sanitizeNodeName(t||"");let e=n;for(let s=1;this.nodeNamesUsed[e];++s)e=n+"_"+s;return this.nodeNamesUsed[e]=!0,e}loadGeometries(t){const n=this,e=this.extensions,s=this.primitiveCache;function r(i){return e[_.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(i,n).then(function(a){return Bt(a,i,n)})}const o=[];for(let i=0,a=t.length;i<a;i++){const c=t[i],u=cr(c),d=s[u];if(d)o.push(d.promise);else{let h;c.extensions&&c.extensions[_.KHR_DRACO_MESH_COMPRESSION]?h=r(c):h=Bt(new mt,c,n),s[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(t){const n=this,e=this.json,s=this.extensions,r=e.meshes[t],o=r.primitives,i=[];for(let a=0,c=o.length;a<c;a++){const u=o[a].material===void 0?or(this.cache):this.getDependency("material",o[a].material);i.push(u)}return i.push(n.loadGeometries(o)),Promise.all(i).then(function(a){const c=a.slice(0,a.length-1),u=a[a.length-1],d=[];for(let p=0,y=u.length;p<y;p++){const m=u[p],g=o[p];let A;const v=c[p];if(g.mode===Q.TRIANGLES||g.mode===Q.TRIANGLE_STRIP||g.mode===Q.TRIANGLE_FAN||g.mode===void 0)A=r.isSkinnedMesh===!0?new Fn(m,v):new Vt(m,v),A.isSkinnedMesh===!0&&A.normalizeSkinWeights(),g.mode===Q.TRIANGLE_STRIP?A.geometry=Ft(A.geometry,Jt):g.mode===Q.TRIANGLE_FAN&&(A.geometry=Ft(A.geometry,ct));else if(g.mode===Q.LINES)A=new jn(m,v);else if(g.mode===Q.LINE_STRIP)A=new Un(m,v);else if(g.mode===Q.LINE_LOOP)A=new Hn(m,v);else if(g.mode===Q.POINTS)A=new Gn(m,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(A.geometry.morphAttributes).length>0&&ar(A,r),A.name=n.createUniqueName(r.name||"mesh_"+t),ue(A,r),g.extensions&&Ce(s,A,g),n.assignFinalMaterial(A),d.push(A)}for(let p=0,y=d.length;p<y;p++)n.associations.set(d[p],{meshes:t,primitives:p});if(d.length===1)return d[0];const h=new st;n.associations.set(h,{meshes:t});for(let p=0,y=d.length;p<y;p++)h.add(d[p]);return h})}loadCamera(t){let n;const e=this.json.cameras[t],s=e[e.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return e.type==="perspective"?n=new oe(Yt.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):e.type==="orthographic"&&(n=new we(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),e.name&&(n.name=this.createUniqueName(e.name)),ue(n,e),Promise.resolve(n)}loadSkin(t){const n=this.json.skins[t],e=[];for(let s=0,r=n.joints.length;s<r;s++)e.push(this._loadNodeShallow(n.joints[s]));return n.inverseBindMatrices!==void 0?e.push(this.getDependency("accessor",n.inverseBindMatrices)):e.push(null),Promise.all(e).then(function(s){const r=s.pop(),o=s,i=[],a=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){i.push(d);const h=new te;r!==null&&h.fromArray(r.array,c*16),a.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[c])}return new Bn(i,a)})}loadAnimation(t){const e=this.json.animations[t],s=e.name?e.name:"animation_"+t,r=[],o=[],i=[],a=[],c=[];for(let u=0,d=e.channels.length;u<d;u++){const h=e.channels[u],p=e.samplers[h.sampler],y=h.target,m=y.node,g=e.parameters!==void 0?e.parameters[p.input]:p.input,A=e.parameters!==void 0?e.parameters[p.output]:p.output;y.node!==void 0&&(r.push(this.getDependency("node",m)),o.push(this.getDependency("accessor",g)),i.push(this.getDependency("accessor",A)),a.push(p),c.push(y))}return Promise.all([Promise.all(r),Promise.all(o),Promise.all(i),Promise.all(a),Promise.all(c)]).then(function(u){const d=u[0],h=u[1],p=u[2],y=u[3],m=u[4],g=[];for(let A=0,v=d.length;A<v;A++){const T=d[A],R=h[A],M=p[A],w=y[A],O=m[A];if(T===void 0)continue;T.updateMatrix();let E;switch(le[O.path]){case le.weights:E=ts;break;case le.rotation:E=It;break;case le.position:case le.scale:default:E=es;break}const S=T.name?T.name:T.uuid,N=w.interpolation!==void 0?rr[w.interpolation]:rn,I=[];le[O.path]===le.weights?T.traverse(function(G){G.morphTargetInfluences&&I.push(G.name?G.name:G.uuid)}):I.push(S);let U=M.array;if(M.normalized){const G=pt(U.constructor),Y=new Float32Array(U.length);for(let j=0,z=U.length;j<z;j++)Y[j]=U[j]*G;U=Y}for(let G=0,Y=I.length;G<Y;G++){const j=new E(I[G]+"."+le[O.path],R.array,U,N);w.interpolation==="CUBICSPLINE"&&(j.createInterpolant=function(H){const de=this instanceof It?sr:un;return new de(this.times,this.values,this.getValueSize()/3,H)},j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),g.push(j)}}return new Kn(s,void 0,g)})}createNodeMesh(t){const n=this.json,e=this,s=n.nodes[t];return s.mesh===void 0?null:e.getDependency("mesh",s.mesh).then(function(r){const o=e._getNodeRef(e.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(i){if(i.isMesh)for(let a=0,c=s.weights.length;a<c;a++)i.morphTargetInfluences[a]=s.weights[a]}),o})}loadNode(t){const n=this.json,e=this,s=n.nodes[t],r=e._loadNodeShallow(t),o=[],i=s.children||[];for(let c=0,u=i.length;c<u;c++)o.push(e.getDependency("node",i[c]));const a=s.skin===void 0?Promise.resolve(null):e.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),a]).then(function(c){const u=c[0],d=c[1],h=c[2];h!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(h,ur)});for(let p=0,y=d.length;p<y;p++)u.add(d[p]);return u})}_loadNodeShallow(t){const n=this.json,e=this.extensions,s=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const r=n.nodes[t],o=r.name?s.createUniqueName(r.name):"",i=[],a=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});return a&&i.push(a),r.camera!==void 0&&i.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){i.push(c)}),this.nodeCache[t]=Promise.all(i).then(function(c){let u;if(r.isBone===!0?u=new zn:c.length>1?u=new st:c.length===1?u=c[0]:u=new gt,u!==c[0])for(let d=0,h=c.length;d<h;d++)u.add(c[d]);if(r.name&&(u.userData.name=r.name,u.name=o),ue(u,r),r.extensions&&Ce(e,u,r),r.matrix!==void 0){const d=new te;d.fromArray(r.matrix),u.applyMatrix4(d)}else r.translation!==void 0&&u.position.fromArray(r.translation),r.rotation!==void 0&&u.quaternion.fromArray(r.rotation),r.scale!==void 0&&u.scale.fromArray(r.scale);return s.associations.has(u)||s.associations.set(u,{}),s.associations.get(u).nodes=t,u}),this.nodeCache[t]}loadScene(t){const n=this.extensions,e=this.json.scenes[t],s=this,r=new st;e.name&&(r.name=s.createUniqueName(e.name)),ue(r,e),e.extensions&&Ce(n,r,e);const o=e.nodes||[],i=[];for(let a=0,c=o.length;a<c;a++)i.push(s.getDependency("node",o[a]));return Promise.all(i).then(function(a){for(let u=0,d=a.length;u<d;u++)r.add(a[u]);const c=u=>{const d=new Map;for(const[h,p]of s.associations)(h instanceof nt||h instanceof Ot)&&d.set(h,p);return u.traverse(h=>{const p=s.associations.get(h);p!=null&&d.set(h,p)}),d};return s.associations=c(r),r})}}function fr(l,t,n){const e=t.attributes,s=new yt;if(e.POSITION!==void 0){const i=n.json.accessors[e.POSITION],a=i.min,c=i.max;if(a!==void 0&&c!==void 0){if(s.set(new k(a[0],a[1],a[2]),new k(c[0],c[1],c[2])),i.normalized){const u=pt(Me[i.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=t.targets;if(r!==void 0){const i=new k,a=new k;for(let c=0,u=r.length;c<u;c++){const d=r[c];if(d.POSITION!==void 0){const h=n.json.accessors[d.POSITION],p=h.min,y=h.max;if(p!==void 0&&y!==void 0){if(a.setX(Math.max(Math.abs(p[0]),Math.abs(y[0]))),a.setY(Math.max(Math.abs(p[1]),Math.abs(y[1]))),a.setZ(Math.max(Math.abs(p[2]),Math.abs(y[2]))),h.normalized){const m=pt(Me[h.componentType]);a.multiplyScalar(m)}i.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(i)}l.boundingBox=s;const o=new ns;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,l.boundingSphere=o}function Bt(l,t,n){const e=t.attributes,s=[];function r(o,i){return n.getDependency("accessor",o).then(function(a){l.setAttribute(i,a)})}for(const o in e){const i=ht[o]||o.toLowerCase();i in l.attributes||s.push(r(e[o],i))}if(t.indices!==void 0&&!l.index){const o=n.getDependency("accessor",t.indices).then(function(i){l.setIndex(i)});s.push(o)}return ue(l,t),fr(l,t,n),Promise.all(s).then(function(){return t.targets!==void 0?ir(l,t.targets,n):l})}const at=new WeakMap;class hr extends en{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,n,e,s){const r=new Xe(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,o=>{this.parse(o,n,s)},e,s)}parse(t,n,e){this.decodeDracoFile(t,n,null,null,ge).catch(e)}decodeDracoFile(t,n,e,s,r=rs){const o={attributeIDs:e||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!e,vertexColorSpace:r};return this.decodeGeometry(t,o).then(n)}decodeGeometry(t,n){const e=JSON.stringify(n);if(at.has(t)){const a=at.get(t);if(a.key===e)return a.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=t.byteLength,i=this._getWorker(r,o).then(a=>(s=a,new Promise((c,u)=>{s._callbacks[r]={resolve:c,reject:u},s.postMessage({type:"decode",id:r,taskConfig:n,buffer:t},[t])}))).then(a=>this._createGeometry(a.geometry));return i.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),at.set(t,{key:e,promise:i}),i}_createGeometry(t){const n=new mt;t.index&&n.setIndex(new ke(t.index.array,1));for(let e=0;e<t.attributes.length;e++){const s=t.attributes[e],r=s.name,o=s.array,i=s.itemSize,a=new ke(o,i);r==="color"&&this._assignVertexColorSpace(a,s.vertexColorSpace),n.setAttribute(r,a)}return n}_assignVertexColorSpace(t,n){if(n!==ge)return;const e=new ie;for(let s=0,r=t.count;s<r;s++)e.fromBufferAttribute(t,s).convertSRGBToLinear(),t.setXYZ(s,e.r,e.g,e.b)}_loadLibrary(t,n){const e=new Xe(this.manager);return e.setPath(this.decoderPath),e.setResponseType(n),e.setWithCredentials(this.withCredentials),new Promise((s,r)=>{e.load(t,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(e=>{const s=e[0];t||(this.decoderConfig.wasmBinary=e[1]);const r=pr.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(t,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const e=this.workerPool[this.workerPool.length-1];return e._taskCosts[t]=n,e._taskLoad+=n,e})}_releaseTask(t,n){t._taskLoad-=t._taskCosts[n],delete t._callbacks[n],delete t._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function pr(){let l,t;onmessage=function(o){const i=o.data;switch(i.type){case"init":l=i.decoderConfig,t=new Promise(function(u){l.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(l)});break;case"decode":const a=i.buffer,c=i.taskConfig;t.then(u=>{const d=u.draco,h=new d.Decoder;try{const p=n(d,h,new Int8Array(a),c),y=p.attributes.map(m=>m.array.buffer);p.index&&y.push(p.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:p},y)}catch(p){console.error(p),self.postMessage({type:"error",id:i.id,error:p.message})}finally{d.destroy(h)}});break}};function n(o,i,a,c){const u=c.attributeIDs,d=c.attributeTypes;let h,p;const y=i.GetEncodedGeometryType(a);if(y===o.TRIANGULAR_MESH)h=new o.Mesh,p=i.DecodeArrayToMesh(a,a.byteLength,h);else if(y===o.POINT_CLOUD)h=new o.PointCloud,p=i.DecodeArrayToPointCloud(a,a.byteLength,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const m={index:null,attributes:[]};for(const g in u){const A=self[d[g]];let v,T;if(c.useUniqueIDs)T=u[g],v=i.GetAttributeByUniqueId(h,T);else{if(T=i.GetAttributeId(h,o[u[g]]),T===-1)continue;v=i.GetAttribute(h,T)}const R=s(o,i,h,g,A,v);g==="color"&&(R.vertexColorSpace=c.vertexColorSpace),m.attributes.push(R)}return y===o.TRIANGULAR_MESH&&(m.index=e(o,i,h)),o.destroy(h),m}function e(o,i,a){const u=a.num_faces()*3,d=u*4,h=o._malloc(d);i.GetTrianglesUInt32Array(a,d,h);const p=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:p,itemSize:1}}function s(o,i,a,c,u,d){const h=d.num_components(),y=a.num_points()*h,m=y*u.BYTES_PER_ELEMENT,g=r(o,u),A=o._malloc(m);i.GetAttributeDataArrayForAllPoints(a,d,g,m,A);const v=new u(o.HEAPF32.buffer,A,y).slice();return o._free(A),{name:c,array:v,itemSize:h}}function r(o,i){switch(i){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const mr=l=>{const{data:t,isLoading:n}=on(l,()=>new Promise((s,r)=>{const o=new Ds,i=new hr;i.setDecoderPath("https://www.ismailbassaoud.fr/draco/"),o.setDRACOLoader(i),o.load(l,s,void 0,r)}),{staleTime:1/0,cacheTime:1/0});return{gltf:x.useMemo(()=>t,[t]),isLoading:n}},Et=x.memo(({isMobile:l,inView:t})=>{const{gltf:n,isLoading:e,error:s}=mr(t?"./desktop_pc/scene.gltf":null),r=x.useRef();x.useEffect(()=>{s&&console.error("Failed to load GLTF model:",s)},[s]),Le(({camera:i})=>{if(!r.current)return;const a=new $t;a.setFromProjectionMatrix(new te().multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse));const c=new yt().setFromObject(r.current);a.intersectsBox(c)||r.current.traverse(d=>{if(d.isMesh)if(d.geometry.dispose(),d.material.isMaterial)o(d.material);else for(const h of d.material)o(h)})});const o=i=>{i.dispose();for(const a of Object.keys(i)){const c=i[a];c&&typeof c=="object"&&"minFilter"in c&&c.dispose()}};return e||!n||!n.scene?D.jsx(bt,{}):D.jsxs("mesh",{ref:r,children:[D.jsx("hemisphereLight",{intensity:.2,groundColor:"black"}),D.jsx("spotLight",{position:[-20,50,10],angle:.12,penumbra:1,intensity:1,castShadow:!0,"shadow-mapSize-width":1024}),D.jsx("pointLight",{intensity:.5}),D.jsx("primitive",{object:n.scene,scale:l?.7:.75,position:l?[0,-3,-2.2]:[0,-3.25,-1.5],rotation:[-.01,-.2,-.02]})]})},(l,t)=>l.isMobile===t.isMobile&&l.inView===t.inView);Et.displayName="Computers";Et.propTypes={isMobile:Fe.bool.isRequired,inView:Fe.bool.isRequired};const Tr=()=>{const{setContext:l}=Kt(),[t,n]=x.useState(!1),{ref:e,inView:s}=zt({triggerOnce:!1,threshold:0,rootMargin:"100% 0px"});x.useEffect(()=>{const o=window.matchMedia("(max-width: 500px)");n(o.matches);const i=a=>{n(a.matches)};return o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[]);const r=({gl:o})=>{l(o)};return D.jsx("div",{ref:e,className:"pt-[13.75rem] md:pt-16 lg:pt-[6.75rem] w-full h-full",children:s&&D.jsx(Zt,{frameloop:"demand",shadows:!0,camera:{position:t?[10,1.5,2.5]:[20,3,5],fov:t?35:25},gl:{preserveDrawingBuffer:!0,antialias:!0},onCreated:r,children:D.jsxs(x.Suspense,{fallback:D.jsx(bt,{}),children:[D.jsx(cn,{enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),D.jsx(Et,{isMobile:t,inView:s})]})})})};export{Ns as B,Tr as C,bt as L,cn as O};
